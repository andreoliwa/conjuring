{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Conjuring","text":"<p>Reusable global Invoke tasks that can be merged with local project tasks.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Merge any local <code>tasks.py</code> file with global Conjuring tasks</li> <li>Use all global Conjuring tasks provided by this package</li> <li>Only include the global Conjuring tasks you want (opt-in mode)</li> <li>Use all Conjuring tasks excluding some (opt-out mode)</li> <li>Display your custom task modules conditionally</li> <li>Display your custom individual tasks conditionally</li> <li>Merge your project tasks with the global reusable tasks</li> <li>Prefix task names of your custom module</li> </ul> <p>More details on the features documentation.</p>"},{"location":"#tasks","title":"Tasks","text":"<p>Each module under the <code>conjuring/spells</code> directory is a collection of Invoke tasks.</p>"},{"location":"#quick-setup","title":"Quick setup","text":"<ol> <li>Install invoke in an isolated virtualenv with pipx:</li> </ol> <pre><code>pipx install invoke\n</code></pre> <ol> <li>Install Conjuring from GitHub, injecting it directly into the isolated virtualenv:</li> </ol> <pre><code>pipx inject invoke conjuring\n</code></pre> <ol> <li>Create a <code>tasks.py</code> file on your home dir:</li> </ol> <pre><code>echo -e \"from conjuring import *\\n\\nnamespace = cast_all_spells()\" &gt; ~/tasks.py\n</code></pre> <ol> <li>You should see the list of Conjuring tasks from any directory where you type this:</li> </ol> <pre><code>invoke --list\n</code></pre>"},{"location":"CHANGELOG/","title":"Changelog","text":""},{"location":"CHANGELOG/#v021-2023-05-20","title":"v0.2.1 (2023-05-20)","text":""},{"location":"CHANGELOG/#fix","title":"Fix","text":"<ul> <li>version number and project metadata</li> </ul>"},{"location":"CHANGELOG/#v020-2023-05-19","title":"v0.2.0 (2023-05-19)","text":""},{"location":"CHANGELOG/#fix_1","title":"Fix","text":"<ul> <li>read pyproject.toml with UTF-8 encoding</li> </ul>"},{"location":"CHANGELOG/#010-2023-05-19","title":"0.1.0 (2023-05-19)","text":""},{"location":"CHANGELOG/#feat","title":"Feat","text":"<ul> <li>media: transcribe using whisper</li> <li>mkdocs: tasks to work with documentation</li> <li>k8s: select multiple apps at once</li> <li>k8s: get pods, replica sets, config maps + validate score</li> <li>mr: add mr support, grep repos for a search text</li> <li>pre-commit: specify hooks without --hook</li> <li>python: test, watch, coverage, debug tools</li> <li>git: option to rebase master branch</li> <li>python: install/reinstall specific version</li> <li>fzf: accept options as arguments</li> <li>aws: list profiles</li> <li>allowed keys in ask_user_prompt()</li> <li>onedrive: display files with conflicts</li> <li>media: --force flag to delete files</li> <li>python: install a Poetry virtual environment</li> <li>paperless: delete failed duplicates</li> <li>remove hidden files and empty dirs</li> <li>paperless: move files instead of copying</li> <li>paperless: skip years and .DS_Store</li> <li>paperless: copy matched/unmatched files to ~/Downloads</li> <li>paperless: display orphan files, matched and unmatched</li> <li>paperless: show matched/unmatched files</li> <li>paperless: show thumbnails</li> <li>paperless: wrapper tasks for paperless</li> <li>ask user prompt</li> <li>git: prepare commit body with bullets</li> <li>git: task to tidy up repo</li> <li>pre-commit: install prepare-commit-msg</li> <li>pre-commit: uninstall all hooks</li> <li>slideshow command (first version)</li> <li>git: watch build then open PR or repo</li> <li>use AWS_PROFILE if it exists</li> <li>git: display changes since the chosen tag</li> <li>pre-commit: commit-msg hook is now optional</li> <li>shell: list and uninstall shell completions</li> <li>shell: click completion for Bash</li> <li>git: choose files with fzf, allow multiple subdirs</li> <li>download video URLs with youtube-dl</li> <li>git: merge the default branch of the repo</li> <li>git: options to rewrite commits with GPG and author</li> <li>docker: remove Docker containers and volumes</li> <li>todo: sort by type+description, option to show only FIXME</li> <li>list TODOs and FIXMEs in code</li> <li>pre-commit: accept comma-separated list of hooks to run</li> <li>git: extract files from a subtree + history + rebase/sign</li> <li>support PEP 660 hooks (editable packages)</li> <li>empty module for those who don't want the default tasks</li> <li>AWS: select account, region, ECR, aws-vault</li> <li>pre-commit: command to uninstall hooks</li> <li>poetry: choose pipx repo to inject with fzf</li> <li>display individual tasks conditionally</li> <li>visibility.py module with reusable functions</li> <li>prefix task names of a module</li> <li>display tasks conditionally</li> <li>merge any tasks.py with Conjuring tasks</li> <li>pre-commit: autoupdate one or all hooks</li> <li>use CONJURING_PREFIX to namespace tasks</li> <li>install a Poetry package as editable</li> <li>default module with all conjuring tasks</li> <li>fork tasks in a separate module</li> <li>optionally check empty dirs</li> <li>display dirs that should be emptied</li> <li>duplicity: choose a directory when restoring</li> <li>backup/restore with Duplicity</li> <li>onedrive: current year first, then others</li> <li>list dirs with _Copy files</li> <li>unhide Picasa originals dir</li> <li>merge original dirs</li> <li>merge copy dirs</li> <li>move picture dirs by year</li> <li>backup files from the m3 hard drive</li> <li>list more dirs on OneDrive</li> <li>add warn param to run_command()</li> <li>option to choose journal on tags task</li> <li>remove empty files before OneDrive dir</li> <li>open the latest N OneDrive photo dirs</li> <li>function to run with fzf</li> <li>run_command function</li> <li>ignore modules with an env var</li> <li>jrnl: journal name</li> <li>more Git helpers</li> <li>query jrnl entries and tags</li> <li>configure a generic remote</li> <li>don't add home tasks twice</li> <li>auto update nitpick</li> <li>set SSH/HTTPS URL for remote</li> <li>pre-commit install and run</li> <li>fork remote and sync</li> <li>invoke tasks for home/current dirs</li> <li>change invoke collection name</li> </ul>"},{"location":"CHANGELOG/#fix_2","title":"Fix","text":"<ul> <li>pre-commit: don't stop on the first failed hook</li> <li>deps: update dependency requests to v2.30.0</li> <li>deps: update dependency invoke to v2.1.2</li> <li>py: check lock before installing, ignore comment on version</li> <li>py: don't fail if pyenv local is not set</li> <li>git: rebase with force push, from origin</li> <li>rename to py, use venv after pyenv set local</li> <li>media: use -f as short for --force</li> <li>return user input on ask_user_prompt()</li> <li>paperless: ignore all .DS_Store, fix --together</li> <li>paperless: don't display red files that can't be checked</li> <li>git: regex to parse Jira tickets</li> <li>git: body cleanup: Jira ticket and other stuff</li> <li>duplicity: max depth when running fd in OneDrive dirs</li> <li>duplicity: uppercase $HOME</li> <li>git: shorten names for commit body command</li> <li>git: prune after deleting branches, push by default</li> <li>media: open the last file (order was random before)</li> <li>git: prune remotes before updating the repo</li> <li>git: open PR in same branch that was watched</li> <li>improved Poetry detection (#1)</li> <li>organize: call invoke task and not the tool directly</li> <li>fd flags (hidden only)</li> <li>display Conjuring tasks only on home dir</li> <li>duplicated name in main collection</li> <li>check prefix before duplicated tasks</li> <li>dry-run mode on run_command()</li> <li>remote name defaults to username</li> <li>duplicity: restore on computer subdir</li> <li>check both Telegram dirs</li> <li>move Telegram dir under Samsung Gallery</li> <li>rename organize to categorize</li> <li>convert Path to str when joining</li> <li>show Telegram dir after current year dir</li> <li>don't limit jrnl entries by default</li> <li>jrnl improvements</li> <li>allow invoke*.py files</li> <li>pty=False to remove colors</li> </ul>"},{"location":"CHANGELOG/#refactor","title":"Refactor","text":"<ul> <li>constants for common directories</li> <li>prefer qualified imports (#3)</li> <li>preparing for multiple spell books</li> <li>gita_super is a better name</li> <li>a more appropriate name</li> <li>move tasks to their spell modules</li> <li>move color constants to conjuring</li> <li>create package structure</li> </ul>"},{"location":"features/","title":"Features","text":""},{"location":"features/#merge-any-local-taskspy-file-with-global-conjuring-tasks","title":"Merge any local <code>tasks.py</code> file with global Conjuring tasks","text":"<p>If you create a <code>tasks.py</code> in a project, it will override the Conjuring <code>tasks.py</code> on your home dir. You will only see your local project tasks.</p> <p>To avoid that, go to your home dir and run:</p> <pre><code>invoke conjuring.setup\n</code></pre> <p>This will create an <code>~/.invoke.yaml</code> file and rename your main tasks file to <code>~/conjuring_summon.py</code>.</p> <p>For more details, read about default configuration values on Configuration \u2014 Invoke documentation.</p>"},{"location":"features/#use-all-global-conjuring-tasks-provided-by-this-package","title":"Use all global Conjuring tasks provided by this package","text":"<p>If you want to use all tasks included in this package, you can import them all.</p> <pre><code>from conjuring import *\nnamespace = cast_all_spells()\n</code></pre> <p>Run <code>invoke --list</code> from any directory, and you will see all Conjuring tasks.</p>"},{"location":"features/#only-include-the-global-conjuring-tasks-you-want-opt-in-mode","title":"Only include the global Conjuring tasks you want (opt-in mode)","text":"<p>You may want to choose which Conjuring modules and tasks you want to use.</p> <p>Suppose you only want:</p> <ul> <li>AWS;</li> <li>Kubernetes;</li> <li>pre-commit;</li> <li>Python;</li> <li>all tasks that install anything.</li> </ul> <p>This is how you can do it:</p> <pre><code>from conjuring import *\nnamespace = cast_only_spells(\"aws*\", \"k8s*\", \"pre-commit*\", \"py*\", \"*install\")\n</code></pre>"},{"location":"features/#use-all-conjuring-tasks-excluding-some-opt-out-mode","title":"Use all Conjuring tasks excluding some (opt-out mode)","text":"<p>You may want to use all Conjuring modules and tasks, except for a few.</p> <p>Suppose you want all Conjuring tasks except media and OneDrive tasks. This is the way:</p> <pre><code>from conjuring import *\nnamespace = cast_all_spells_except(\"media*\", \"onedrive*\")\n</code></pre>"},{"location":"features/#display-your-custom-task-modules-conditionally","title":"Display your custom task modules conditionally","text":"<p>Some modules under the <code>spells</code> directory have a <code>should_display_tasks</code> boolean function to control whether the tasks are displayed or not.</p> <p>The <code>conjuring.visibility</code> module has boolean functions that can be reused by your modules and tasks.</p> <p>Example from the <code>conjuring.spells.git</code> module:</p> <pre><code>from conjuring.visibility import is_git_repo, ShouldDisplayTasks\nshould_display_tasks: ShouldDisplayTasks = is_git_repo\n</code></pre> <p>Other use cases:</p> <ul> <li>Poetry tasks: display only when   there is a <code>pyproject.toml</code> in the current dir;</li> <li>pre-commit tasks: display only   when there is a <code>.pre-commit-config.yaml</code> file in the current dir.</li> </ul>"},{"location":"features/#display-your-custom-individual-tasks-conditionally","title":"Display your custom individual tasks conditionally","text":"<p>A task can have its own visibility settings, even if the owner module is configured to not display tasks.</p> <pre><code>from invoke import task\nfrom conjuring.visibility import MagicTask\nfrom random import randint\n@task(klass=MagicTask)\ndef an_always_visible_task(c):\n\"\"\"A MagicTask is always visible by default.\n    It will always be displayed in every directory,\n        regardless of the module ``should_display_tasks()`` function.\n    \"\"\"\npass\n@task(klass=MagicTask, should_display=lambda: bool(randint(0, 1)))\ndef a_conditionally_visible_task(c):\n\"\"\"You can use any boolean function to determine visibility.\"\"\"\npass\n</code></pre> <p>Use case:</p> <ul> <li>you want to group tasks in a module, with a prefix and conditional display of tasks;</li> <li>you still want some individual tasks to always be displayed;</li> <li>or you want different conditions to display certain tasks.</li> </ul>"},{"location":"features/#merge-your-project-tasks-with-the-global-reusable-tasks","title":"Merge your project tasks with the global reusable tasks","text":"<p>Create local <code>conjuring*.py</code> files, and they will be merged with the <code>tasks.py</code> in your home dir. Your project dir can be anywhere under your home dir.</p> <ol> <li>Create <code>~/path/to/your/project/conjuring_foo.py</code> with Invoke tasks.</li> </ol> <pre><code>from invoke import task\n@task\ndef my_foo(c):\n\"\"\"My foo task.\"\"\"\npass\n</code></pre> <ol> <li>Create another <code>~/path/to/your/project/conjuring_bar.py</code> file with more    Invoke tasks.</li> </ol> <pre><code>from invoke import task\n@task\ndef my_bar(c):\n\"\"\"My bar task.\"\"\"\npass\n</code></pre> <ol> <li>The task list in your project dir will show tasks from all files, including    the home dir task list.</li> </ol> <pre><code>$ cd ~/path/to/your/project/\n$ invoke --list\nAvailable tasks:\n\nmy-bar               My bar task.\n  my-foo               My foo task.\n  &lt;... the global Conjuring tasks will show up here...&gt;\n</code></pre>"},{"location":"features/#prefix-task-names-of-your-custom-module","title":"Prefix task names of your custom module","text":"<p>If the module defines this boolean constant with a value of <code>True</code>, then the name of the module will be added as a prefix to tasks.</p> <p>Example for the <code>conjuring.spells.pre_commit</code> module:</p> <pre><code>SHOULD_PREFIX = True\n</code></pre> <p>All the tasks of this module will have a <code>pre-commit.</code> prefix when you run <code>invoke --list</code>.</p>"},{"location":"related/","title":"Related projects","text":"<ul> <li>pyinvoke/invoke: Pythonic task management &amp; command execution.</li> <li>pyinvoke/invocations: Reusable Invoke tasks</li> <li>jhermann/rituals: Project automation task library for \u2018Invoke\u2019 tasks that are needed again and again.</li> </ul>"}]}